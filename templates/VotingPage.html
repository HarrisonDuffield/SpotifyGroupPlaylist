<!doctype html>
<html>
<head>
    <title>Spotify Group Bangers</title>
    <link rel="stylesheet" type="text/css" href="../static/main.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>       
</head>
<body class="central-y-child">
    <div class="container" style="margin-bottom: 4em;">
    
    <button id = "InFavourButton" onclick = "VoteInFavour()" disabled = "disabled">Banger</button>
    <button id = "AgainstButton" onclick = "VoteAgainst()"  disabled = "disabled">Dud</button>
</body>
    <script>
        SongsToVoteOn =[];
        VotesInFavour = [];
        VotesAgainst  = [];
        CurrentSong = ""
        $(document).ready(function() {        
            $.get('/ReturnSongsAwaitVote',{GroupId:"J9r9J30pwi"}).done(function(data){
                SongsToVoteOn= data;
                console.log(SongsToVoteOn[8]);
                MakeButtonsLive()
            }).done(MakeButtonsLive())})
            
        
        function MakeButtonsLive(){//probably should mess around with doing this propelry off a chain of promises / async funcitons etc, but acc that seems to work so , even if sketchy
            console.log("DocumentReady")
            console.log(SongsToVoteOn)
            if (SongsToVoteOn.length >0){
                $("#AgainstButton").prop("disabled", false);
                $("#InFavourButton").prop("disabled", false);
                
                CurrentSong = SongsToVoteOn[0];
                console.log(CurrentSong)
            }
        }
        
        function VoteInFavour(){
            alert("Vote In Favour" + CurrentSong);
            VotesInFavour.push(CurrentSong);
            NextSong();
            
        }

        function VoteAgainst(){
            alert(CurrentSong)
            alert("Vote Against" + CurrentSong);
            VotesAgainst.push(CurrentSong);
            NextSong();
        }
        function NextSong(){
            console.log("Next Song Called");
            CurrentSong=CurrentSong[CurrentSong.indexo]
        }
        function SetAlbumImage(){
            
        }
        function PackUpSendBack(){
            // Both Arrays combined into JSON String wdetailing what each array is
            //field for group added
            //field for user id added
            //string sent back up to the flask 
            //string unpacked on the flask
            //array of negative votes is then porcessed (simply just record each vote on the database)
            //arrray of positive votes is then done in the same manner
        }
    </script>

</html>